<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/public/css/styles.css" />

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker3.min.css">

    <!-- jquery js-->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>

    <!-- dayjs js-->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.7/dayjs.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/customParseFormat.js"></script>

    <!-- bootstrap js-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>


    <!-- datepicker js-->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

    <!-- tinytMCE text editor js-->
    <script src="https://cdn.tiny.cloud/1/esvjbm9l3mmwlet8kn4o2aq0czeii6ovhi9xtxt9uty5wqea/tinymce/6/tinymce.min.js"
        referrerpolicy="origin"></script>
</head>

<body class="mx-lg-4 mx-md-4 mx-sm-4">
    <header>
        {{>headNavBar months=months currentMonth=currentMonth
        yearRange=yearRange currYear=currYear prevYear=prevYear prevMonth=prevMonth nextMonth=nextMonth
        nextYear=nextYear week=week}}
    </header>
    <main class="container-fluid">
        <div class="row">
            <div class="col-lg-2 col-md-3 col-sm-4 col-12">
                <div id="left-menu-div">{{>leftPane}}</div>
            </div>
            <div class="col-lg-8 col-md-6 col-sm-4 col-12">
                {{{body}}}
            </div>
            <div class="col-lg-2 col-md-3 col-sm-4 col-12">
                <div id="right-menu-div">{{>rightPane }}</div>
            </div>
        </div>

    </main>

    <footer class="position-bottom ">
        {{#if session}}
        {{#if (eq title "Calendar")}}
        <div class="btn-toolbar justify-content-center" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group me-2" role="group" aria-label="Add Event Button">
                <button id="add-event-trigger" type="button" class="btn btn-primary" data-bs-toggle="modal"
                    data-bs-target="#add-event-modal">Add Event</button>
            </div>

            <div class="btn-group me-2" role="group" aria-label="Filter Button">
                <div class="dropend">
                    <button class="btn btn-secondary " type="button" id="dropdownMenuButton" data-bs-toggle="dropdown"
                        data-bs-auto-close="false" aria-expanded="false">
                        Select Filter Options
                    </button>

                    <!-- Create a dropdown menu -->
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <li>
                            <form id="filterForm" action="/calendar/filter" method="POST">
                                <div class="form-group d-grid gap-1 p-2">
                                    {{#each filter.eventTypes}}
                                    <div class="form-check  form-switch">
                                        <input class="form-check-input" role="switch" type="checkbox" value="{{this}}"
                                            id="event-filter-{{this}}" name="event-filter-{{this}}" {{#if (includes
                                            ../filter.eventTypeSelected this)}} checked {{/if}}>
                                        <label class="form-label" for="event-filter-{{this}}">
                                            {{this}}
                                        </label>
                                    </div>
                                    {{/each}}

                                    {{#each filter.tags}}
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" role="switch" type="checkbox" value="{{this}}"
                                            id="tag-filter-{{this}}" name="tag-filter-{{this}}" {{#if (includes
                                            ../filter.tagsSelected this)}} checked {{/if}}>
                                        <label class="form-label" for="tag-filter-{{this}}">
                                            {{this}}
                                        </label>
                                    </div>
                                    {{/each}}
                                    <button type="submit" class="btn btn-primary" id="submit">Submit</button>
                                </div>

                            </form>

                        </li>
                    </ul>

                </div>
            </div>

        </div>
        {{/if}}
        {{/if}}

    </footer>
    {{#if session.user_id}}
    {{#if (eq title 'Calendar')}}
    <script src="/public/scripts/week-calendar.js" type="text/javascript"></script>
    {{/if}}
    {{/if}}

    {{!-- experimental --}}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tota11y/0.1.6/tota11y.min.js"
        integrity="sha512-1HVjtS0xDBXlnujfjKAaWul3+WZf4hcniLWuXm82KsfodAliukKsfpkgkIjL5MbSHIpe5t8+vT282xjPT5BuTg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>

</html>